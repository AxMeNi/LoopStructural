
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LoopStructural design &#8212; LoopStructural 0.1 documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="../auto_examples/index.html" />
    <link rel="prev" title="Contribute" href="contributors_guide.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">LoopStructural 0.1 documentation</p>
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../auto_examples/index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guide/index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../_autosummary/LoopStructural.html">
  LoopStructural
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://www.loop3d.org">Loop3d<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/loop3d/LoopStructural" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/loop3d" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="background.html">
   Background
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="about.html">
   About
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributors_guide.html">
   Contribute
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   LoopStructural design
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#context">
   Context
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#goals-and-non-goals">
   Goals and Non-Goals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#existing-solutions">
   Existing Solutions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#technical-architecture">
   Technical Architecture
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interpolators">
     1. interpolators
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modelling">
     2. modelling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#visualisation">
     3. visualisation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#d-visualisation">
       3D visualisation
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#utils">
     4. utils
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <div class="section" id="loopstructural-design">
<h1>LoopStructural design<a class="headerlink" href="#loopstructural-design" title="Permalink to this heading">#</a></h1>
<p><strong>Authors:</strong> Lachlan Grose, Laurent Ailleres, Gautier Laurent, Mark Jessell, Roy Thomson</p>
<p><strong>Last updated:</strong> 1/11/2021</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>LoopStructural is a modular 3D geological modelling library with a flexible API for building 3D geological models. It provides access to implicit interpolators as well as geological feature/events.</p>
</div>
<div class="section" id="context">
<h2>Context<a class="headerlink" href="#context" title="Permalink to this heading">#</a></h2>
<p>The objective of geological modelling is to predict the geometry and distribution of geological objects in the subsurface. Different geological objects are represented by approximating an implicit function where isovalues/level sets of the implicit function define the geometry of geological features. The interaction between different geological objects is defined by the geological feature type (fault, fold, unconformity).</p>
</div>
<div class="section" id="goals-and-non-goals">
<h2>Goals and Non-Goals<a class="headerlink" href="#goals-and-non-goals" title="Permalink to this heading">#</a></h2>
<p>The aim of LoopStructural are:</p>
<ul class="simple">
<li><p>to provide an easy to use python API for building 3D geological models from data.</p></li>
<li><p>a platform for developing 3D modelling ideas, remove the requirement for boiler plate code.</p></li>
<li><p>integrate more geological observation types and knowledge into the modelling workflow</p></li>
</ul>
</div>
<div class="section" id="existing-solutions">
<h2>Existing Solutions<a class="headerlink" href="#existing-solutions" title="Permalink to this heading">#</a></h2>
<p>There are a number of commercial and open source 3D modelling packages available.</p>
<ul class="simple">
<li><p>Gocad/Skua provides a 3D modelling environment and an implicit interpolation algorithm</p></li>
<li><p>GemPy is a python based open source 3D modelling library that implements co-kriging and event management.</p></li>
<li><p>Geomodeller is a commerical package that implements the co-kriging algorithm and event management.</p></li>
<li><p>Petrel is a commercial package that implements implicit modelling.</p></li>
<li><p>Leapfrog is a commercial package that implements implicit modelling.</p></li>
<li><p>StructuralLab is a plugin for Gocad that implements discrete implicit modelling.</p></li>
</ul>
</div>
<div class="section" id="technical-architecture">
<h2>Technical Architecture<a class="headerlink" href="#technical-architecture" title="Permalink to this heading">#</a></h2>
<p><strong>Module design</strong> LoopStructural is divided into submodules which contain specific independent elements of the code.
The submodules separate clear differences in the functionality of the code.
The main modules for the library are:</p>
<ol class="arabic simple">
<li><p>interpolators</p></li>
<li><p>modelling</p></li>
<li><p>visualisation</p></li>
<li><p>utils</p></li>
</ol>
<p><strong>Coding paradigm</strong> LoopStructural is written in an object oriented paradigm.
The four pillars of object oriented coding should be adhered to:</p>
<ul class="simple">
<li><p><strong>Encapsulation</strong>: Attributes in python are designed to be accessible both within the class and from outside of the class. In LoopStructural, the where an attribute of a class should be private the <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> decorator should be used.</p></li>
<li><p><strong>Inheritance</strong>: Classes should inheret attributes and methods from parent classes.</p></li>
<li><p><strong>Polymorphism</strong>: Child classes, where a method is different from a parent class should override methods from parent classes.</p></li>
</ul>
<p><strong>Dependency management</strong> The library is written in python and is dependent on numpy, scipy. Care should be taken to avoid incorporating of uncessary dependencies. For dependencies that are not part of the standard scientific python toolkit (numfocus projects) the dependencies should be optional and not be required.</p>
<p><strong>Documentation</strong> The documentation is written for sphinx and should be formatted using the numpy style.</p>
<p><strong>Tests</strong> The tests are written using pytest and should be run using the command <code class="docutils literal notranslate"><span class="pre">pytest</span></code>.
There should be unit tests for all classes and methods.
Integration tests should be included to test the interaction between classes.</p>
<p><strong>CI/CD</strong> The code is automatically versioned using release-please.
When creating a commit use the conventional commit style e.g. <code class="docutils literal notranslate"><span class="pre">fix:</span> <span class="pre">bug</span> <span class="pre">fix</span></code>, <code class="docutils literal notranslate"><span class="pre">feat:</span> <span class="pre">new</span> <span class="pre">feature</span></code>, <code class="docutils literal notranslate"><span class="pre">chore:</span> <span class="pre">code</span> <span class="pre">change</span></code>.
A new patch pull request will be created when a bug fix is applied and passes the tests.
A new feature pull request will be created when a new feature is added and passes the tests.
When the new release is merged the library will be deployed to pypi, loop3d conda channel and dockerhub.
The documentation is automatically built when a new release is created and will be uploaded.
The entire CI/CD workflow is run using github actions.</p>
<div class="section" id="interpolators">
<h3>1. interpolators<a class="headerlink" href="#interpolators" title="Permalink to this heading">#</a></h3>
<p>The interpolation module contains different interpolators and associated supports used by LoopStructural.
The purpose of the interpolator is to build a 2D/3D scalar field from constraints (e.g. orientation, contact, fold).
The base of the interpolation module is the <strong>GeologicalInterpolator</strong> class.
The <strong>GeologicalInterpolator</strong> class contains the entry point for all interpolators and the functions for accessing constraints.
All implementations of interpolators are subclassed from the <strong>GeologicalInterpolator</strong>.
This module should include all interpolators and associated classes (e.g. mesh, grid, operators).
Future update: there should be a separate API so that the interpolators can be used without a GeologicalModel.</p>
</div>
<div class="section" id="modelling">
<h3>2. modelling<a class="headerlink" href="#modelling" title="Permalink to this heading">#</a></h3>
<p>The modelling is the main entry point to LoopStructural and includes the <strong>GeologicalModel</strong> class.
A <strong>GeologicalModel</strong> consists of <strong>GeologicalFeatures</strong> which define a particular geological phenomenon.
For example, a <strong>GeologicalFeature</strong> can be a stratigraphic sequence, a fault, a foliation, an unconformity, an intrusion.
The <strong>GeologicalFeature</strong> is something that can be evaluated within the model for a value, or gradient.</p>
<p>In LoopStructural the <strong>GeologicalFeature</strong> is built by a <strong>GeologicalFeatureBuilder</strong>.
The <strong>GeologicalFeatureBuilder</strong> is a class that manages the assembly of the interpolation constraints.
The builder is in charge of keeping track of whether the interpolator has been run and whether the data/constraints have changed.
The builder could also be used to build a <strong>GeologicalFeature</strong> without an interpolator.</p>
</div>
<div class="section" id="visualisation">
<h3>3. visualisation<a class="headerlink" href="#visualisation" title="Permalink to this heading">#</a></h3>
<p>The visualisation module is in charge of creating 2D/3D visualisations for the GeolgicalModel and GeologicalFeatures.</p>
<div class="section" id="d-visualisation">
<h4>3D visualisation<a class="headerlink" href="#d-visualisation" title="Permalink to this heading">#</a></h4>
<p>The 3D visualisation module for LoopStructural has been written using an abstract base class.
<strong>BaseModelPlotter</strong> contains all of the methods for plotting the various different attributes for a GeologicalModel.
A visualisation module can be implemented by simply subclassing the <strong>BaseModelPlotter</strong> and implementing the following methods:</p>
<ul class="simple">
<li><p><cite>_add_surface(self,vertices,face,name)</cite> to add a triangular surface to the plot.</p></li>
<li><p><cite>_add_points(self,points,name,value=None)</cite> to add xyz points with an optional value attribute to colour by.</p></li>
<li><p><cite>_add_vector_marker(self, location, vector, name symbol_type=arrow)</cite> to add a vector marker to the plot.</p></li>
</ul>
</div>
</div>
<div class="section" id="utils">
<h3>4. utils<a class="headerlink" href="#utils" title="Permalink to this heading">#</a></h3>
<p>The utils module is a container for utility functions that are used throughout the library.</p>
</div>
</div>
</div>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="contributors_guide.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Contribute</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="../auto_examples/index.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Examples</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>